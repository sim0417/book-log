# TIL / 2ì¥ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì… ì‹œìŠ¤í…œ part.3 / 2023.05.22

## ğŸ ì˜¤ëŠ˜ ì½ì€ ë‚´ìš©

- ì•„ì´í…œ 12: í•¨ìˆ˜ í‘œí˜„ì‹ì— íƒ€ì… ì ìš©í•˜ê¸°
- ì•„ì´í…œ 13: íƒ€ì…ê³¼ ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´ì  ì•Œê¸°
- ì•„ì´í…œ 14: íƒ€ì… ì—°ì‚°ê³¼ ì œë„ˆë¦­ ì‚¬ìš©ìœ¼ë¡œ ë°˜ë³µ ì¤„ì´ê¸°

## ğŸ“” ë©”ëª¨

### í•¨ìˆ˜ í‘œí˜„ì‹ì— íƒ€ì… ì ìš©í•˜ê¸°

- JSì™€ TSëŠ” í•¨ìˆ˜'ë¬¸ì¥(statement)'ê³¼ í•¨ìˆ˜ 'í‘œí˜„ì‹(expression)'ì„ ë‹¤ë¥´ê²Œ ì¸ì‹í•©ë‹ˆë‹¤. 
  
```ts
function rollDice1(sides: number): number { return 0; }  // ë¬¸ì¥
const rollDice2 = function(sides: number): number { return 0; };  // í‘œí˜„ì‹
const rollDice3 = (sides: number): number => { return 0; };  // í‘œí˜„ì‹
```

> TSì—ì„œëŠ” **í•¨ìˆ˜ í‘œí˜„ì‹**ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
> í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ ë¶€í„° ë°˜í™˜ê°’ê¹Œì§€ ì „ì²´ë¥¼ í•¨ìˆ˜ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ í•¨ìˆ˜ í‘œí˜„ì‹ì— ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```ts
type DiceRollFn = (sides: number) => number;
const rollDice: DiceRollFn = sides => { return 0; };
```

- í•¨ìˆ˜íƒ€ì…ì˜ ì„ ì–¸ì€ ë¶ˆí•„ìš”í•œ ì½”ë“œì˜ ë°˜ë³µì„ ì¤„ì…ë‹ˆë‹¤.

```ts
type BinaryFn = (a: number, b: number) => number;
const add: BinaryFn = (a, b) => a + b;
const sub: BinaryFn = (a, b) => a - b;
const mul: BinaryFn = (a, b) => a * b;
const div: BinaryFn = (a, b) => a / b;
```

- ë§Œì•½ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê³  ìˆë‹¤ë©´ ê³µí†µ ì½œë°±í•¨ìˆ˜ë¥¼ ìœ„í•œ íƒ€ì… ì„ ì–¸ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```ts
// lib.dom.d.ts ì— ì„ ì–¸ë˜ì–´ ìˆëŠ” fetchì˜ íƒ€ì…
declare function fetch(
  input: RequestInfo, init?: RequestInit
): Promise<Response>;

// fetchê°€ ì‹¤íŒ¨í•˜ë©´ ê±°ì ˆëœ í”„ë¡œë¯¸ìŠ¤ë¥¼ ì‘ë‹µí•  ìˆ˜ ìˆê²Œ checkedFetch ì‘ì„±
async function checkedFetch(input: RequestInfo, init?: RequestInit) {
  const response = await fetch(input, init);
  if (!response.ok) {
    // ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ì—ì„œ ê±°ì ˆëœ í”„ë¡œë¯¸ìŠ¤ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    throw new Error('Request failed: ' + response.status);
  }
  return response;
}

// ì•„ë˜ì™€ ê°™ì´ `typeof fetch`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë” ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const checkedFetch: typeof fetch = async (input, init) => {
  const response = await fetch(input, init);
  if (!response.ok) {
    throw new Error('Request failed: ' + response.status);
  }
  return response;
}
``` 

> í•¨ìˆ˜ ë¬¸ì¥ì„ í•¨ìˆ˜ í‘œí˜„ì‹ìœ¼ë¡œ ë°”ê¿¨ê³  í•¨ìˆ˜ ì „ì²´ì— íƒ€ì…ì„ ì ìš©í–ˆìŠµë‹ˆë‹¤.
> ì´ëŠ” `input` ê³¼ `init`ì˜ íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
> íƒ€ì…êµ¬ë¬¸ì€ ë˜í•œ `checkedFetch`ì˜ ë°˜í™˜íƒ€ì…ì„ ë³´ì¥í•˜ë©°, `fetch`ì™€ ë™ì¼í•©ë‹ˆë‹¤.
> ì˜ˆë¥¼ ë“¤ì–´ `throw`ëŒ€ì‹  `return`ì„ ì‚¬ìš©í–ˆë‹¤ë©´, TSëŠ” ê·¸ ì‹¤ìˆ˜ë¥¼ ì¡ì•„ëƒ…ë‹ˆë‹¤.

---
### íƒ€ì…ê³¼ ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´ì  ì•Œê¸°

- TSì—ì„œ ëª…ëª…ëœ íƒ€ì„(named type)ì„ ì •ì˜í•˜ëŠ” ë°©ë²•ì€ ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

```ts
// íƒ€ì…ì„ ì‚¬ìš©
type TState = {
  name: string;
  capital: string;
}

// ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©
interface IState {
  name: string;
  capital: string;
}
```
> âš ï¸ ì´ ì•„ì´í…œ ë‚´ì˜ ì˜ˆì œì—ëŠ” íƒ€ì…ì„ I(ì¸í„°í˜ì´ìŠ¤) ë˜ëŠ” T(íƒ€ì…)ë¡œ ì‹œì‘í•´ ì–´ë–¤ í˜•íƒœë¡œ ì •ì˜ ë˜ì—ˆëŠ”ì§€ ë‚˜íƒ€ëƒˆìŠµë‹ˆë‹¤.
> **ì‹¤ì œ ì½”ë“œì—ì„œëŠ” ì´ë ‡ê²Œ í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.** ì¸í„°í˜ì´ìŠ¤ ì ‘ë‘ì‚¬ë¡œ Ië¥¼ ë¶™ì´ëŠ” ê²ƒì€ C#ì—ì„œ ë¹„ë¡¯ëœ ê´€ë¡€ì…ë‹ˆë‹¤. 
> ì´ ì˜í–¥ì„ ë°›ì•„ ì´ˆì°½ê¸°ì—ëŠ” ì¢…ì¢… ì‚¬ìš©ë˜ì—ˆìœ¼ë‚˜ í˜„ì¬ëŠ” ì§€ì–‘í•´ì•¼í•  ìŠ¤íƒ€ì¼ë¡œ ì—¬ê²¨ì§‘ë‹ˆë‹¤.

ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— íƒ€ì…ì„ ì‚¬ìš©í•´ë„ ë˜ê³  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ë„ ë©ë‹ˆë‹¤. 
ê·¸ëŸ¬ë‚˜ íƒ€ì…ê³¼ ì¸í„°í˜ì´ìŠ¤ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ì°¨ì´ë¥¼ ë¶„ëª…í•˜ê²Œ ì•Œê³  ê°™ì€ ìƒí™©ì—ì„œëŠ” ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ëª…ëª…ëœ íƒ€ì…ì„ ì •ì˜í•´ ì¼ê´€ì„±ì„ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

- ì¸í„°í˜ì´ìŠ¤ëŠ” íƒ€ì…ì„ í™•ì¥í•  ìˆ˜ ìˆìœ¼ë©°, íƒ€ì…ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
interface IStateWithPop extends TState {
  population: number;
}

type TStateWithPop = IState & { population: number; };
```

> ì¸í„°í˜ì´ìŠ¤ëŠ” ìœ ë‹ˆì˜¨ íƒ€ì…ê°™ì€ ë³µì¡í•œ íƒ€ì…ì„ í™•ì¥í•˜ì§€ëŠ” ëª»í•©ë‹ˆë‹¤. 
> ë³µì¡í•œ íƒ€ì…ì„ í™•ì¥í•˜ê³  ì‹¶ë‹¤ë©´ íƒ€ì…ê³¼ &ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

- ìœ ë‹ˆì˜¨ íƒ€ì…ì€ ìˆì§€ë§Œ ìœ ë‹ˆì˜¨ ì¸í„°í˜ì´ìŠ¤ë¼ëŠ” ê°œë…ì€ ì—†ìŠµë‹ˆë‹¤.

```ts
type AorB = 'A' | 'B';

type Input = { /* ... */ };
type Output = { /* ... */ };
type NamedVariable = (Input | Output) & { name: string };
// NamedVariable íƒ€ì…ì€ ì¸í„°í˜ì´ìŠ¤ë¡œ í‘œí˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
```

- ì¸í„°í˜ì´ìŠ¤ëŠ” 'ë³´ê°•(augment)'ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```ts
interface IState {
  name: string;
  capital: string;
}
interface IState {
  population: number;
}
const wyoming: IState = {
  name: 'Wyoming',
  capital: 'Cheyenne',
  population: 500_000
};  // ì •ìƒ
```

> ì´ ì˜ˆì œì²˜ëŸ¼ ì†ì„±ì„ í™•ì¥í•˜ëŠ” ê²ƒì„ 'ì„ ì–¸ ë³‘í•©(declaration merging)'ì´ë¼ê³  í•©ë‹ˆë‹¤.

#### ì–¸ì œ ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€ ?

- ë³µì¡í•œ íƒ€ì…(ìœ ë‹ˆì˜¨ íƒ€ì…)ì´ë¼ë©´ íƒ€ì…ì„ ì‚¬ìš©
- ë‘˜ ë‹¤ ì‚¬ìš©ê°€ëŠ¥í•œ ê²½ìš° ì¼ê´€ì„±ê³¼ ë³´ê°•ì˜ ê´€ì ìœ¼ë¡œ ë°”ë¼ë³¸ë‹¤
  - ì¼ê´€ì„±: ì¼ê´€ë˜ê²Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì—ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ì¼ê´€ë˜ê²Œ íƒ€ì…ì„ ì‚¬ìš©í•œë‹¤ë©´ íƒ€ì…ì„ ì‚¬ìš©.
  - ë³´ê°•: ì•„ì§ ìŠ¤íƒ€ì¼ì´ í™•ë¦½ë˜ì§€ ì•Šì€ í”„ë¡œì íŠ¸ë¼ë©´ ë³´ê°•ì˜ ê°€ëŠ¥ì„±ì´ ìˆì„ì§€ì— ëŒ€í•´ì„œ ìƒê°í•´ì•¼ í•œë‹¤.
    - ì–´ë–¤ APIì— ëŒ€í•œ íƒ€ì…ì„ ì‘ì„±í•´ì•¼ í•œë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
    - í”„ë¡œì íŠ¸ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ì— ì„ ì–¸ ë³‘í•©ì´ ë°œìƒí•˜ëŠ” ê²ƒì€ ì˜ëª»ëœ ì„¤ê³„ ì´ë¯€ë¡œ ì´ëŸ´ ë•ŒëŠ” íƒ€ì…ì„ ì‚¬ìš©.  

---
### íƒ€ì… ì—°ì‚°ê³¼ ì œë„ˆë¦­ ì‚¬ìš©ìœ¼ë¡œ ë°˜ë³µ ì¤„ì´ê¸°

> ê°™ì€ ì½”ë“œë¥¼ ë°˜ë³µí•˜ì§€ ë§ë¼ëŠ” DRY(Don't Repeat Yourself)ì›ì¹™ì„ ë“¤ì–´ë³´ì…¨ë‚˜ìš” ? 
> ë¹„ìŠ·í•œ ì½”ë“œê°€ ë°˜ë³µëœë‹¤ë©´, ìˆ˜ì •ì´ ì¼ì–´ë‚  ê²½ìš° ë°˜ë³µë˜ëŠ” ëª¨ë“  ê³³ì—ì„œ ë™ì¼í•˜ê²Œ ìˆ˜ì •ì„ í•´ì¤˜ì•¼ í•˜ê³  ì‹¤ìˆ˜í•  í™•ë¥ ì´ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
> ê·¸ëŸ°ë° ë°˜ë³µëœ ì½”ë“œë¥¼ ì—´ì‹¬íˆ ì œê±°í•˜ë©° DRY ì›ì¹™ì„ ì§€ì¼°ë˜ ê°œë°œìë¼ë„ íƒ€ì…ì— ê´€í•´ì„œëŠ” ì˜ ì§€í‚¤ì§€ ëª»í–ˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.

íƒ€ì…ê°„ì˜ ë§¤í•‘í•˜ëŠ” ë°©ë²•ì„ ìµíˆë©´, íƒ€ì… ì •ì˜ì—ì„œë„ DRYì˜ ì¥ì ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- íƒ€ì…ì— ì´ë¦„ ë¶™ì´ê¸°

```ts
function distance(a: {x: number, y: number}, b: {x: number, y: number}) {
  return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));
}
```
</br>

ìœ„ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ íƒ€ì…ì— ì´ë¦„ì„ ë¶™ì´ë©´ ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
interface Point2D {
  x: number;
  y: number;
}

function distance(a: Point2D, b: Point2D) { /* ... */ }
```

```ts
function get(url: string, opts: Options): Promise<Response> { 
  return Promise.resolve(new Response()); 
}

function post(url: string, opts: Options): Promise<Response> { 
  return Promise.resolve(new Response()); 
}
```
</br>

ê°™ì€ íƒ€ì… ì‹œê·¸ë‹ˆì²˜ë¥¼ ê³µìœ í•œë‹¤ë©´ í•´ë‹¹ ì‹œê·¸ë‹ˆì²˜ë¥¼ ëª…ëª…ëœ íƒ€ì…ìœ¼ë¡œ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type HTTPFunction = (url: string, options: Options) => Promise<Response>;

const get: HTTPFunction = (url, options) => { 
  return Promise.resolve(new Response()); 
};

const post: HTTPFunction = (url, options) => { 
  return Promise.resolve(new Response()); 
};
```
</br>

- íƒ€ì…ì„ í™•ì¥í•´ì„œ ë°˜ë³µì„ ì œê±°

```ts
interface Person {
  firstName: string;
  lastName: string;
}

interface PersonWithBirthDate {
  firstName: string;
  lastName: string;
  birth: Date;
}
```
</br>

ìœ„ ì˜ˆì œì—ì„œ í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•´ì„œ ë°˜ë³µì„ ì œê±°í•œ ì½”ë“œ ì…ë‹ˆë‹¤.

```ts
interface Person {
  firstName: string;
  lastName: string;
}

interface PersonWithBirthDate extends Person {
  birth: Date;
}
```
</br>

ì¼ë°˜ì ì´ì§€ ì•Šì§€ë§Œ ì¸í„°ì„¹ì…˜ ì—°ì‚°ì(&)ë¥¼ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type PersonWithBirthDate = Person & { birth: Date };
```
</br>

- Pickì„ ì‚¬ìš©í•˜ì—¬ í™•ì¥ëŒ€ì‹  ë¶€ë¶„ ì§‘í•©ìœ¼ë¡œ íƒ€ì…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
interface State {
  userId: string;
  pageTitle: string;
  recentFiles: string[];
  pageContents: string;
}
type TopNavState = Pick<State, 'userId' | 'pageTitle' | 'recentFiles'>;
```
</br>

- Partialì„ ì‚¬ìš©í•˜ì—¬ ê° ì†ì„±ì„ ì„ íƒì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
interface Options {
  width: number;
  height: number;
  color: string;
  label: string;
}
interface OptionsUpdate {
  width?: number;
  height?: number;
  color?: string;
  label?: string;
}
class UIWidget {
  constructor(init: Options) { /* ... */ }
  update(options: OptionsUpdate) { /* ... */ }
}
```
</br>


```ts
type OptionsUpdate1 = {[k in keyof Options]?: Options[k]};

type OptionsUpdate2 = Partial<Options>;
```
</br>

- ì œë„ˆë¦­ íƒ€ì…ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
interface Name {
  first: string;
  last: string;
}
type DancingDuo<T extends Name> = [T, T];

const couple1: DancingDuo<Name> = [
  {first: 'Fred', last: 'Astaire'},
  {first: 'Ginger', last: 'Rogers'}
];  // ì •ìƒ

const couple2: DancingDuo<{first: string}> = [
                       // ì˜¤ë¥˜. 'Name' íƒ€ì…ì— í•„ìš”í•œ 'last' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  {first: 'Sonny'},
  {first: 'Cher'}
];
```
</br>

`Pick`ì˜ ì •ì˜ëŠ” `extends`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì™„ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type Pick<T, K> = {
  [k in K]: T[k]; // ì˜¤ë¥˜. 'K' íƒ€ì…ì€ 'string | number | symbol' íƒ€ì…ì— í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
};
```
</br>

`K`ëŠ” `T`íƒ€ì…ê³¼ ë¬´ê´€í•˜ê³  ë²”ìœ„ê°€ ë„ˆë¬´ ë„“ìŠµë‹ˆë‹¤. `K`ëŠ” ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” `string | number | symbol` ì´ ë˜ì–´ì•¼ í•˜ë©° ì‹¤ì œë¡œëŠ” ë²”ìœ„ë¥¼ ì¡°ê¸ˆ ë” ì¢í ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts
type Pick<T, K extends keyof T> = {
  [k in K]: T[K];
};
// KëŠ” ì‹¤ì œë¡œëŠ” Tì˜ í‚¤ì˜ ë¶€ë¶„ ì§‘í•© ì¦‰ 'extends keyof T' ê°€ ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. 
```

## ğŸ’¡ ìƒê°

- í•¨ìˆ˜ í‘œí˜„ì‹ ì „ì²´ì— íƒ€ì…êµ¬ë¬¸ì„ ì ìš©í•˜ë„ë¡ ë…¸ë ¥í•˜ì. 
- ë‹¤ë¥¸ í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì°¸ì¡°í•˜ë ¤ë©´ `typeof fn` ì„ ì‚¬ìš©í•˜ì.
- íƒ€ì…ê³¼ ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´ì ì„ ì¢€ ë” ëª…í™•í•˜ê²Œ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.
  - í‰ì†Œ ì–´ë–¤ ê²ƒì„ ì¨ì•¼í• ì§€ ë§ì´ í—·ê°ˆë¦¬ëŠ” ì£¼ì œì˜€ëŠ”ë° ì±…ì„ í†µí•´ ì¢€ ë” íƒ€ì…ì„ ì˜ í™œìš©í•´ì•¼ ê² ë‹¤ëŠ” ìƒê°ì„ í–ˆë‹¤.  
- `typeof` ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°’ì„ íƒ€ì…ìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì€ ì–´ëŠ ìƒí™©ì— í•„ìš”í• ê¹Œ ?


</br>
</br>
